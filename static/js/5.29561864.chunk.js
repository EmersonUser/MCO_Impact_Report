"use strict";(self.webpackChunkreact_widget_template=self.webpackChunkreact_widget_template||[]).push([[5],{7217:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var o=a(5043),s=a(4391),n=(a(2342),a(9555),a(3003)),l=a(2670),r=a(2115),i=(a(8421),a(4050),a(9959),a(2725)),c=a(6713),d=a(7419),m=a(579);var u=a(9379),p=(a(4816),a(3637));a(1238),a(2450);const h=e=>{let{columns:t,data:a}=e;const[s,n]=(0,o.useState)(""),[l,r]=(0,o.useState)(1),i=(0,o.useMemo)((()=>a.filter((e=>t.some((t=>String(e[t.accessorKey]).toLowerCase().includes(s.toLowerCase())))))),[s,a,t]),c=(0,o.useMemo)((()=>{const e=10*(l-1);return i.slice(e,e+10)}),[i,l]),d=Math.ceil(i.length/10);return(0,m.jsxs)("div",{className:"container-fluid p-0 mt-3",children:[(0,m.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3"}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table custom-table table-hover",children:[(0,m.jsx)("thead",{className:"thead-light",children:(0,m.jsx)("tr",{children:t.map((e=>(0,m.jsx)("th",{children:e.header},e.accessorKey)))})}),(0,m.jsx)("tbody",{children:c.length>0?c.map(((e,a)=>(0,m.jsx)("tr",{children:t.map((t=>(0,m.jsx)("td",{children:e[t.accessorKey]},t.accessorKey)))},a))):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:t.length,className:"text-center",children:"No data found."})})})]})}),(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,m.jsxs)("p",{className:"mb-0",children:["Showing ",10*(l-1)+1," to"," ",Math.min(10*l,i.length)," of"," ",i.length," entries"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{className:"btn btn-outline-primary mx-1",disabled:1===l,onClick:()=>r((e=>e-1)),children:"Prev"}),(0,m.jsx)("span",{children:l}),(0,m.jsx)("button",{className:"btn btn-outline-primary mx-1",disabled:l===d,onClick:()=>r((e=>e+1)),children:"Next"})]})]})]})},g=e=>{let{columns:t,data:a}=e;const[s,n]=(0,o.useState)(""),[l,r]=(0,o.useState)(1),i=(0,o.useMemo)((()=>a.filter((e=>t.some((t=>String(e[t.accessorKey]).toLowerCase().includes(s.toLowerCase())))))),[s,a,t]),c=(0,o.useMemo)((()=>{const e=10*(l-1);return i.slice(e,e+10)}),[i,l]),d=Math.ceil(i.length/10);return(0,m.jsxs)("div",{className:"container-fluid p-0 mt-3",children:[(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table custom-table table-hover",children:[(0,m.jsx)("thead",{className:"thead-light",children:(0,m.jsx)("tr",{children:t.map((e=>(0,m.jsx)("th",{children:e.header},e.accessorKey)))})}),(0,m.jsx)("tbody",{children:c.length>0?c.map(((e,a)=>(0,m.jsx)("tr",{children:t.map((t=>(0,m.jsx)("td",{children:e[t.accessorKey]},t.accessorKey)))},a))):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:t.length,className:"text-center",children:"No data found."})})})]})}),(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,m.jsxs)("p",{className:"mb-0",children:["Showing ",10*(l-1)+1," to"," ",Math.min(10*l,i.length)," of"," ",i.length," entries"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{className:"btn btn-outline-primary mx-1",disabled:1===l,onClick:()=>r((e=>e-1)),children:"Prev"}),(0,m.jsx)("span",{children:l}),(0,m.jsx)("button",{className:"btn btn-outline-primary mx-1",disabled:l===d,onClick:()=>r((e=>e+1)),children:"Next"})]})]})]})};var v=a(759),f=a(5645);const I=(e,t,a)=>(console.log("cadata datahelpers",a),e?e.map((e=>{if("Change Action"===t)return{ItemName:(null===e||void 0===e?void 0:e.ItemTitle)||"N/A",ItemRev:(null===e||void 0===e?void 0:e.ItemRev)||"N/A",ItemType:(null===e||void 0===e?void 0:e.ItemType)||"N/A",ItemId:(null===e||void 0===e?void 0:e.ItemId)||"N/A",ItemSeq:(null===e||void 0===e?void 0:e.ItemSeq)||"N/A"}})):[]),A=(e,t,a)=>(console.log("cadata datahelpers",a),e?e.map((e=>{if("Change Action"===t)return{ItemFromName:(null===e||void 0===e?void 0:e.ItemFromTitle)||"N/A",ItemToName:(null===e||void 0===e?void 0:e.ItemToTitle)||"N/A",ItemRev:(null===e||void 0===e?void 0:e.ItemRev)||"N/A",ItemType:(null===e||void 0===e?void 0:e.ItemType)||"N/A",ItemId:(null===e||void 0===e?void 0:e.ItemId)||"N/A",ItemSeq:(null===e||void 0===e?void 0:e.ItemSeq)||"N/A"}})):[]);var y=a(6244),b=a(9332),x=a(5072),w=a(9269),S=a(4392),C=a(3277),D=a(2268),N=a(6047);const j=()=>{const{showErrorToast:e}=(0,i.A)(),t=(0,n.wA)();let a=window.widget.getValue("email");console.log("Email in usePlantAssignment:",a);return{handlePlantAssignment:async(o,s,n,l)=>{try{t((0,f.Ve)(!0));const r=await(0,D.I)();if(!r)return void e(C.rK);console.log("[UsePlantAssignment] Headers:",r);let i=[],c=[];if("Change Action"===l){let e=!1;console.log("The object Type is Change Action");const a=async()=>{const e="https://oi000186152-us1-space.3dexperience.3ds.com/enovia/resources/v1/modeler/dslc/changeaction/".concat(n,"?%24fields=proposedChanges,realizedChanges"),t=await(0,N.ui)("GET",e,"",r);if(console.log("Response from Change Action URL:",t),t.status&&t.output){const e=t.output.proposedChanges.map((async e=>{var t;let a=e.where.identifier,o=e.where.type;const s=await async function(e,t){let a="https://oi000186152-us1-space.3dexperience.3ds.com/enovia/resources/v1/modeler/dsmfg/dsmfg:MfgItem/".concat(e,"/expand?$mask=dsmfg:MfgItem.ExpandMask.Default.V1");const o={expandDepth:1,withPath:!1};try{const l=await(0,N.ui)("POST",a,o,t);if(console.log("expandItms --1-- ",null===l||void 0===l?void 0:l.output),l.status&&l.output){var s;const e=[],t=null===l||void 0===l||null===(s=l.output)||void 0===s?void 0:s.totalItems;for(let a=0;a<t;a++){var n;const t=null===l||void 0===l||null===(n=l.output)||void 0===n?void 0:n.member[a],o={id:t.id,type:t.type,title:t.title};"CreateAssembly"!==t.type&&"Provide"!==t.type||e.push(o)}return console.log("expandItmArray ---- ",e),{expandItmArray:e}}return console.log("No valid response for identifier ".concat(e)),{}}catch(l){return console.error("Error fetching item details for ".concat(e,":"),l),{}}}(a,r);console.log("expandItemDetails ----",s);let n=null===s||void 0===s?void 0:s.expandItmArray.length,l=null===s||void 0===s||null===(t=s.expandItmArray[0])||void 0===t?void 0:t.title,d="";n>1&&(d=l);for(let w=0;w<n;w++){var m,u;let e=null===s||void 0===s||null===(m=s.expandItmArray[w])||void 0===m?void 0:m.id,t=null===s||void 0===s||null===(u=s.expandItmArray[w])||void 0===u?void 0:u.type;const n=await E(e,r);console.log("engItemDetails Details are:",n);let l=n.identifier;if(void 0!==l&&void 0!==a&&void 0!==o)try{const[o,s]=await Promise.all([P(l,r),M(e,t,r)]);var p,h,g,v,f,I,A,y,b;if(console.log("ItemPlants --- ",o),console.log("Iteminfo --- ",s),a===(null===s||void 0===s?void 0:s.member[0].id))i.push({ItemId:e,ItemType:t,ItemState:(null===s||void 0===s?void 0:s.member[0].state)||"N/A",ItemTitle:(null===s||void 0===s?void 0:s.member[0].title)||"N/A",ItemRev:(null===s||void 0===s?void 0:s.member[0].revision)||"N/A",ItemMBOM:(null===s||void 0===s||null===(p=s.member[0])||void 0===p||null===(h=p["dseno:EnterpriseAttributes"])||void 0===h?void 0:h.EMR_hasMBOM)||"N/A",ItemSeq:(null===(g=o[0])||void 0===g?void 0:g.Seq)||"N/A",ItemERPStatus:(null===(v=o[0])||void 0===v?void 0:v.PlantERPStatus)||"N/A",ItemPlantName:null===(f=o[0])||void 0===f?void 0:f.PlantName});if(d&&d!==(null===s||void 0===s?void 0:s.member[0].title))c.push({ItemId:e,ItemType:t,ItemState:(null===s||void 0===s?void 0:s.member[0].state)||"N/A",ItemFromTitle:d||"N/A",ItemToTitle:(null===s||void 0===s?void 0:s.member[0].title)||"N/A",ItemMBOM:(null===s||void 0===s||null===(I=s.member[0])||void 0===I||null===(A=I["dseno:EnterpriseAttributes"])||void 0===A?void 0:A.EMR_hasMBOM)||"N/A",ItemSeq:(null===(y=o[0])||void 0===y?void 0:y.Seq)||"N/A",ItemERPStatus:(null===(b=o[0])||void 0===b?void 0:b.PlantERPStatus)||"N/A"});console.log("MCA ItemDetails",i),console.log("MCA ItemDetails2",c)}catch(x){console.error("Error processing change for item ".concat(e,":"),x)}}}));await Promise.all(e)}else console.error("Invalid response structure or no proposed changes.")},s=async()=>{const e=await(0,b.g)([o],r,n);console.log("Parallel API response:",e),t((0,f.QL)(e))};await Promise.all([a(),s()]),t((0,f.nN)(i)),t((0,f.lQ)(c)),t((0,f.Dr)(e))}else{const e=await(0,y.o)(r,n,a);console.log("[Plant Assignment] User Groups:",e);let i=[...e,o];console.log("[Use Plant Assignment] All CollabSpaces:",i);let c=[];if(i.length>0?(c=await(0,b.g)(i,r,n),console.log("[Use Plant Assignment] All Plants:",c)):console.warn("[Use Plant Assignment] No CollabSpaces found."),c.length>0){const e=await(0,S.d)(c,r,n);console.log("[Use Plant Assignment]: ",e),e.success?(t((0,f.Lq)(e.data.plantData)),t((0,f.lL)(r))):console.error("Failed to fetch plant data.")}else console.warn("[Use Plant Assignment] No Plants found.");let d={};d="Raw_Material"===l?{success:!0,data:[]}:await(0,x.P)(r,n,l),console.log("Type After:",l),console.log("[Use Plant Assignment] Product Children:",d),d.success&&t((0,f.VG)(d.data));const m=await(0,w.B)(r,n,s);console.log("[Use Plant Assignment] CA Details:",m),m.success&&(t((0,f.ug)(m.data)),t((0,f.aB)(m.proposedChanges)),t((0,f.hF)(m.CAData))),console.log("[Plant Assignment] All services executed successfully.")}}catch(r){console.error("[Plant Assignment] Error:",r),e("An error occurred while fetching plant assignment data.")}finally{t((0,f.Ve)(!1))}}}};async function P(e,t){const a=[],o="https://oi000186152-us1-space.3dexperience.3ds.com/enovia/resources/v1/modeler/dslib/dslib:ClassifiedItem/".concat(e,"?$mask=dslib:ClassificationAttributesMask");try{const s=await(0,N.ui)("GET",o,"",t);console.log("Response for identifier ".concat(e,":"),s),s.output.member&&s.output.member[0].ClassificationAttributes?s.output.member[0].ClassificationAttributes.member.forEach((e=>{const t=e.ClassID;let o=null,s=null,n=null;e.Attributes.forEach((e=>{e.name.includes("PlantId")&&(o=e.value),e.name.includes("ERPStatus")&&(s=e.value),e.name.includes("Seq")&&(n=e.value,console.log("sequence --- ",n))})),a.push({PlantName:o,PlantID:t,Seq:n,PlantERPStatus:s||"Pending"}),console.log("plantIdData ---- ",a)})):console.log("No valid classification data for identifier ".concat(e))}catch(s){console.error("Error fetching assigned classes for ".concat(e,":"),s)}return a}async function M(e,t,a){let o="https://oi000186152-us1-space.3dexperience.3ds.com/enovia/resources/v1/modeler/dsmfg/dsmfg:MfgItem/".concat(e,"?mask=dsmfg:MfgItemMask.Details");try{const t=await(0,N.ui)("GET",o,"",a);return t.status&&t.output?t.output:(console.log("No valid response for identifier ".concat(e)),{})}catch(s){return console.error("Error fetching item details for ".concat(e,":"),s),{}}}async function E(e,t){let a="";a="https://oi000186152-us1-space.3dexperience.3ds.com/enovia/resources/v1/modeler/dsmfg/dsmfg:MfgItem/".concat(e,"/dsmfg:ScopeEngItem");try{const o=await(0,N.ui)("GET",a,"",t);return o.status&&o.output?{identifier:o.output.member[0].ScopeEngItem.identifier,type:o.output.member[0].ScopeEngItem.type}:(console.log("No valid response for identifier ".concat(e)),{})}catch(o){return console.error("Error fetching item details for ".concat(e,":"),o),{}}}var R=a(314);const T=()=>{const{showErrorToast:e}=(0,i.A)(),{handlePlantAssignment:t}=j(),a=(0,n.d4)((e=>e.droppedObject.isDropped)),s=(0,n.d4)((e=>e.droppedObject.loading)),l=(0,n.wA)(),r=(0,o.useCallback)((async a=>{try{const n=await(0,R.Sj)({dataItems:a});if(n.success){l((0,f.um)({cardData:n.data.cardData}));const e=n.data.cardData;var o,s;if(console.log("[Dragged Items are]",e),l((0,f.Rr)(!0)),n)await t(e["Collaborative Space"],e["Maturity State"],null===(o=a[0])||void 0===o?void 0:o.objectId,null===(s=a[0])||void 0===s?void 0:s.objectType)}else e(C.wX)}catch(n){console.error("[FetchObjectDetails] Error fetching details:",n),e(C.wX)}finally{l((0,f.r1)(!1))}}),[l,t]),c=(0,o.useCallback)((async t=>{console.log("[handleDrop] handleDrop called with dataItems:",t);try{if(t&&t.length>0){var a;const o=null===(a=t[0])||void 0===a?void 0:a.objectType;if(!["VPMReference","Document","Raw_Material","Change Action"].includes(o))return void e(C.Zo);l((0,f.Rr)(!0)),console.log("[handleDrop] \ud83d\udd04 Force setting `loading = true`..."),l((0,f.r1)(!1)),setTimeout((()=>l((0,f.r1)(!0))),0),await r(t)}else console.warn("[handleDrop] No data items to process.")}catch(o){console.error("[Drop] Error in handleDrop:",o),l((0,f.r1)(!1)),console.log("[handleDrop] Error in handleDrop, setting loading to false"),e(C.nz)}}),[r,e]);return{initializeDroppableArea:(0,o.useCallback)((()=>{a?console.log("[initializeDroppableArea] \u23f3 isDropped is already true. Skipping reset."):(console.log("[initializeDroppableArea] \ud83d\ude80 Resetting isDropped to false..."),l((0,f.Rr)(!1)));const t=setInterval((()=>{const a=document.querySelector(".droppable-container");a&&(clearInterval(t),(0,R.pn)(a,c,l,e))}),100);return()=>clearInterval(t)}),[c,l]),loading:s,handleDrop:c}};a(3127),a(5362),a(6313),a(3728);a(4119),a(1397);var q=a(4675);a(3910);const O=e=>{let{handleFileInputChange:t,fileInputRef:a,isFileInputDisabled:o,handleSubmit:s,isCreateButtonDisabled:n,handleReset:l}=e;const{handleDrop:r}=(0,d.A)(),{performSearch:i}=(0,q.A)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"droppable-container mt-4",children:[(0,m.jsx)(p.A,{style:{width:"90px",height:"65px"},src:"https://thewhitechamaleon.github.io/testrapp/images/drag.png",alt:"Data Collect"}),(0,m.jsx)("span",{className:"drag-and-drop-text",children:"Drag and Drop"}),(0,m.jsx)("div",{class:"mt-3",children:(0,m.jsxs)("div",{class:"row justify-content-center",children:[(0,m.jsx)("div",{class:"col-6 col-md-auto mb-2"}),(0,m.jsx)("div",{class:"col-6 col-md-auto mb-2"})]})})]})})};var k=a(3353),K=a(5658);const F=()=>{const{showSuccessToastWithProgress:e,showErrorToastWithProgress:t}=(0,i._)(),[a,s]=(0,o.useState)(!1),[l,r]=(0,o.useState)(null),[d,y]=(0,o.useState)(!1),[b,x]=(0,o.useState)([]),{initializeDroppableArea:w,loading:S}=T(),[C,D]=(0,o.useState)(0),[N,j]=(0,o.useState)(0),[P,M]=(0,o.useState)([]),[E,R]=(0,o.useState)([]),[q,F]=(0,o.useState)([]),[L,B]=(0,o.useState)(null),[U,_]=(0,o.useState)([]),[V,G]=(0,o.useState)([]),[z,H]=(0,o.useState)([]),[W,X]=(0,o.useState)(!1),[Q,$]=(0,o.useState)(!0),{handleDrop:Y}=T(),[Z,J]=(0,o.useState)(!1),[ee,te]=(0,o.useState)(!1),[ae,oe]=(0,o.useState)(!1),[se,ne]=(0,o.useState)(!1),le=(0,n.wA)(),{showSuccessToast:re,showErrorToast:ie}=(0,i.A)();let ce=window.widget.getValue("Credentials");console.log("Security context is: ",ce);const de=(0,o.useRef)(null),me=(0,o.useCallback)(((e,t)=>{G((a=>a.map((a=>a.ItemId===e?(0,u.A)((0,u.A)({},a),{},{ItemPlants:a.ItemPlants.map((e=>e.PlantID===t?(0,u.A)((0,u.A)({},e),{},{color:"red"===e.color?"green":"red"}):e))}):a))))}),[G]),ue=(0,n.d4)((e=>e.droppedObject.droppedObjectData));console.log("droppedObjectData",ue);const pe=(0,n.d4)((e=>e.droppedObject.MCAItemObjectDetails.MCAItemDetails));console.log("The MCA Item Details are:",pe);const he=(0,n.d4)((e=>e.droppedObject.MCAItemObjectDetails2.MCAItemDetails2));console.log("The MCA Item Details are:",he);const ge=(0,n.d4)((e=>e.droppedObject.loadingParentDetails));console.log("Parents Loading State:",ge);const ve=(0,n.d4)((e=>e.droppedObject.isDropped)),fe=(0,n.d4)((e=>e.droppedObject.plantObjectData.CAData));console.log("The CAData is....:",fe);const Ie=(0,n.d4)((e=>e.droppedObject.plantObjectData.CAName));if(console.log("[plant Assignment] CAName:",Ie),(0,o.useEffect)((()=>{P.length>=0&&D((e=>e+1))}),[P]),(0,o.useEffect)((()=>{E.length>=0&&j((e=>e+1))}),[E]),ue.cardData&&ue.initialDraggedData){ue.cardData["Maturity State"],ue.cardData.HasMBOM;var Ae,ye,be=null===(Ae=ue.initialDraggedData)||void 0===Ae||null===(ye=Ae.data)||void 0===ye?void 0:ye.items[0].objectType}(0,o.useEffect)((()=>{"Change Action"===be&&G(pe)}),[be,pe]),(0,o.useEffect)((()=>{"Change Action"===be&&H(he)}),[be,he]),(0,o.useEffect)((()=>{ve||w()}),[ve,w]),(0,o.useEffect)((()=>{J(ge)}),[ge]);const xe=(0,o.useMemo)((()=>I("Change Action"===be?V:q,be,fe)),[V,q,be,fe]),we=(0,o.useMemo)((()=>A("Change Action"===be?z:q,be,fe)),[z,q,be,fe]),Se=(0,o.useMemo)((()=>(e=>{if(!e||!e.cardData)return null;const t=e.cardData;let a={title:t.Title||"N/A",type:t.Type||"N/A","Maturity State":t["Maturity State"]||"N/A",owner:t.Owner||"N/A","Collaborative Space Title":t["Collaborative Space Title"]||"N/A",Description:t.Description||"N/A","Dropped Revision":t["Dropped Revision"]||"N/A","Latest Released Revision":t["Latest Released Revision"]||"N/A","CAD Format":t["CAD Format"]||"N/A",imageURL:t.imageURL||"https://oi000186152-us1-space.3dexperience.3ds.com/enovia/snresources/images/icons/large/I_VPMNavProduct108x144.png"};return"Document"!==t.Type&&(a.EIN=t.EIN||"N/A",a["CAD Format"]=t["CAD Format"]||"N/A"),a})(ue)),[ue]);console.log(Se),(0,o.useEffect)((()=>{xe.length>=0&&(console.log("New Table Data:",xe),M(xe),D((e=>e+1)))}),[xe]),(0,o.useEffect)((()=>{we.length>=0&&(console.log("New Table Data:",we),R(we),j((e=>e+1)))}),[we]),(0,o.useEffect)((()=>{oe(!!Se)}),[Se]);const Ce=(0,o.useMemo)((()=>((e,t)=>{if(console.log("type here is: ",t),"Change Action"===t)return[{accessorKey:"ItemName",header:"Name"},{accessorKey:"ItemRev",header:"Rev"},{accessorKey:"ItemType",header:"Type"},{accessorKey:"ItemPolicy",header:"Policy"},{accessorKey:"ItemMakeBuy",header:"Make/Buy"},{accessorKey:"ItemSeq",header:"Sequence"},{accessorKey:"ItemPrevSeqMCO",header:"Prev. Seq. MCO"},{accessorKey:"ItemPrevSeqStartDate",header:"Prev. Seq. Start Date"},{accessorKey:"ItemNextSeqMCO",header:"Next Seq MCO"},{accessorKey:"ItemNextSeqStartDate",header:"Next Seq Start Date"}]})(0,be)),[Ie,be,se,me]),De=(0,o.useMemo)((()=>((e,t)=>{if(console.log("type here is: ",t),"Change Action"===t)return[{accessorKey:"ItemFromName",header:"From Part"},{accessorKey:"ItemToName",header:"To Part"},{accessorKey:"ItemFindNumber",header:"F/N"},{accessorKey:"ItemRefDes",header:"Ref Des"},{accessorKey:"ItemMfgUsageCode",header:"Manufacturing Usage Code"},{accessorKey:"ItemSeq",header:"Sequence"},{accessorKey:"ItemPrevSeqMCO",header:"Prev. Seq. MCO"},{accessorKey:"ItemPrevSeqStartDate",header:"Prev. Seq. Start Date"},{accessorKey:"ItemNextSeqMCO",header:"Next Seq MCO"},{accessorKey:"ItemNextSeqStartDate",header:"Next Seq Start Date"},{accessorKey:"ItemChildMCO",header:"Child MCO"},{accessorKey:"ItemChildStartDate",header:"Child Start Date"}]})(0,be)),[Ie,be,se,me]);(0,o.useEffect)((()=>{console.log("[MBOMImpactReport] State Changes:",{loading:S,loadingParentDetails:ge,isDropped:ve})}),[S,ge,ve]);const Ne=()=>{r(null),B(null),x([]),y(!1),M([]),_([]),G([]),H([]),F([]),D(0),j(0),X(!1),de.current&&(de.current.value=""),$(!0)};return console.log("Before template render :: columns ::",Ce),console.log("Before template render :: tableData ::",P),(0,m.jsxs)(m.Fragment,{children:[ee&&(0,m.jsx)(c.A,{}),!ve&&!S&&!Z&&(0,m.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:(0,m.jsx)(O,{handleFileInputChange:e=>{(0,K.fp)(e,x,y,ie,re,r,B,$).finally((()=>{te(!1)})),X(!0)},fileInputRef:de,isFileInputDisabled:W,handleSubmit:async()=>{if(l){te(!0);try{await(0,K.uk)(l,e,t,Ne)}catch(a){console.error("Error in handleSubmit:",a)}finally{te(!1)}$(!0)}else ie("Please upload and validate a file before proceeding.")},isCreateButtonDisabled:Q,handleReset:Ne})}),ve&&(0,m.jsxs)(m.Fragment,{children:[S&&(0,m.jsx)(c.A,{}),(0,m.jsx)("div",{className:"content-wrapper py-3 border-bottom",children:(0,m.jsxs)("div",{className:"d-flex ",children:[(0,m.jsx)("div",{className:" p-0 pt-4",children:(0,m.jsx)(p.A,{src:"https://thewhitechamaleon.github.io/testrapp/images/home.png",alt:"home-icon",className:"home-icon",onClick:()=>{w(),le((0,f.Rr)(!1)),le((0,f.um)({cardData:{},parentDetails:[],versions:[],initialDraggedData:[]})),le((0,f.Lq)({allPlants:[],initialAssignedPlants:[],uniquePlants:[],productChildren:[],CAName:!1,headers:{},proposedChanges:[],CAData:{}})),le((0,f.XC)({CAItemDetails:[],CAallPlants:[],CAisMFGCA:!1,CAheaders:{}})),M([]),oe(!1)}})}),Se&&(0,m.jsx)(v.A,{data:Se,widgetType:"MBOMImpactReport"})]})}),Z?(0,m.jsx)("div",{className:"loading-indicator mt-5"}):(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"wrapper-cta",style:{overflowY:"auto"},children:[(0,m.jsx)("h3",{style:{marginTop:"16px",marginLeft:"10px"},children:"Part Revisions"}),(0,m.jsx)("div",{className:"table-container",children:(0,m.jsx)(h,{columns:Ce,data:P})}),(0,m.jsx)("h3",{style:{marginTop:"16px",marginLeft:"10px"},children:"MBOM Connections"}),(0,m.jsx)("div",{className:"table-container",children:(0,m.jsx)(g,{columns:De,data:E})})]})})]}),(0,m.jsx)(k.A,{show:d,onHide:()=>y(!1),errors:b})]})};let L=null;function B(){if(window.widget){let e=!1;window.widget.addEvent("onLoad",(()=>{e?console.warn("[index.js] \u23f3 onLoad was already executed. Ignoring duplicate trigger."):(e=!0,function(){var e,t;requirejs(["DS/PlatformAPI/PlatformAPI"],(e=>{window.PlatformAPI=e}));let a=(null===(e=window.widget)||void 0===e||null===(t=e.body)||void 0===t?void 0:t.querySelector("#root"))||document.getElementById("root");a||(a=document.createElement("div"),a.id="root",window.widget&&window.widget.body?window.widget.body.appendChild(a):document.body.appendChild(a)),L||(L=s.createRoot(a)),L.render((0,m.jsxs)(n.Kq,{store:l.A,children:[(0,m.jsx)(F,{}),(0,m.jsx)(r.N9,{})]}))}())}))}else console.error("[index.js] \u274c Widget not detected! onLoad cannot be registered.")}!function(){if(window.parent&&window.parent.document){let e=window.parent.document.createElement("script");e.textContent='\n    function listenForRefreshClicks() {\n      // console.log("\ud83c\udf0d [Parent] Listening for manual refresh clicks...");\n\n      document.body.addEventListener("click", function (event) {\n        let refreshButton = event.target.closest("#refresh"); // Check if refresh was clicked\n\n        if (refreshButton) {\n          // console.log("\u2705 [Parent] User clicked Refresh!");\n          sessionStorage.setItem("userClickedRefresh", "true"); // Store flag\n          // console.log("Stored Flag:", sessionStorage.getItem("userClickedRefresh"));\n        }\n      }, true);\n    }\n\n    // \u2705 Ensure event listener is added even if DOM is already loaded\n    if (document.readyState === "loading") {\n      document.addEventListener("DOMContentLoaded", listenForRefreshClicks);\n    } else {\n      listenForRefreshClicks();\n    }\n  ',window.parent.document.body.appendChild(e)}else console.warn("\u26a0\ufe0f [index.js] Unable to inject script\u2014parent window not accessible.")}()}}]);
//# sourceMappingURL=5.29561864.chunk.js.map